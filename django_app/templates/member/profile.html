{% extends 'common/base.html' %}

{% block content %}
<div class="content">

    <img src="{{ cur_user.img_profile.url }}" width="80px" alt="">

    <h3>{{ cur_user }}</h3>

    {% if user != cur_user %}
    <form action="{% url 'member:follow_toggle' user_pk=cur_user.pk %}" method="post">
        {% csrf_token %}
        {% if cur_user in user.following %}
            <button type="submit" class="btn">팔로우</button>
        {% else %}
            <button type="submit" class="btn">팔로우 취소</button>
        {% endif %}
    </form>
    {% else %}
    <a href="{% url 'member:profile_edit' %}">프로필 수정</a>
    {% endif %}

    <h5>Following</h5>
    {% for u in cur_user.following %}
        <div>
            <a href="{% url 'member:profile' user_pk=u.id %}" class="btn">{{u}}</a>
        </div>
    {% endfor %}

    <h5>Followers</h5>
    {% for u in cur_user.followers %}
        <div>
            <a href="{% url 'member:profile' user_pk=u.id %}" class="btn">{{u}}</a>
        </div>
    {% endfor %}

    <ul class="profile-photo-list">
    {% for post in posts %}
        <li>
            <a href="{% url 'post:post_detail' post_pk=post.id %}"><img src="{{ post.photo.url }}" alt=""></a>
        </li>
    {% endfor %}
    </ul>

    {% if next_page %}
        <a href="?page=2" class="btn btn-primary btn-lg btn-block"> 더 불러오기 </a>
    {% endif %}

</div>
{% endblock %}
